{% extends "admin/base_site.html" %}
{% load i18n static admin_extras %}

{% block content %}
<style>
.tile-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:18px;margin-top:18px}
.tile{display:flex;align-items:center;gap:14px;border:1px solid #e5e7eb;border-radius:14px;padding:16px;text-decoration:none;color:#0f172a;background:#ffffff;box-shadow:0 1px 2px rgba(0,0,0,.04);position:relative}
.tile:hover{box-shadow:0 4px 10px rgba(0,0,0,.08)}
.tile .icon{width:40px;height:40px;border-radius:10px;background:#e0f2fe;display:flex;align-items:center;justify-content:center}
.tile .label{font-size:15px;font-weight:600}
.tile .count{position:absolute;top:12px;right:12px;background:#f1f5f9;border:1px solid #e2e8f0;border-radius:9999px;padding:2px 8px;font-size:12px;color:#334155}
.tile.add{background:#0ea5e9;color:#ffffff;border-color:#0ea5e9}
.tile.add .icon{background:#0369a1}
.brand-accent{color:#0ea5e9}
.tile-bar{display:flex; gap: 12px; margin-top: 12px}
.tile-bar a.tile{flex:0 0 260px}
</style>

{% if app_list %}
  {% for app in app_list %}
    <h1>{{ app.name }}</h1>
    <div class="tile-grid">
      {% for model in app.models %}
        <a class="tile" href="{{ model.admin_url }}">
          <div class="icon">
            {% comment %} Minimal icon by model name {% endcomment %}
            {% if model.object_name == 'Tenant' %}
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 21v-6a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v6" stroke="#0ea5e9" stroke-width="2"/><circle cx="8" cy="7" r="3" stroke="#0ea5e9" stroke-width="2"/><path d="M17 21v-8h3v8" stroke="#0ea5e9" stroke-width="2"/></svg>
            {% elif model.object_name == 'Brand' %}
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 5h16v6H4z" stroke="#0ea5e9" stroke-width="2"/><path d="M4 15h10v4H4z" stroke="#0ea5e9" stroke-width="2"/></svg>
            {% elif model.object_name == 'Site' %}
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 4h18v6H3zM3 14h8v6H3zM13 14h8v6h-8z" stroke="#0ea5e9" stroke-width="2"/></svg>
            {% elif model.object_name == 'SSID' %}
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 8a14 14 0 0 1 20 0M5 11a10 10 0 0 1 14 0M8 14a6 6 0 0 1 8 0" stroke="#0ea5e9" stroke-width="2"/><circle cx="12" cy="18" r="1.5" fill="#0ea5e9"/></svg>
            {% elif model.object_name == 'Controller' %}
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="4" y="5" width="16" height="10" rx="2" stroke="#0ea5e9" stroke-width="2"/><path d="M8 19h8" stroke="#0ea5e9" stroke-width="2"/></svg>
            {% elif model.object_name == 'Page' %}
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="5" y="4" width="14" height="16" rx="2" stroke="#0ea5e9" stroke-width="2"/><path d="M8 8h8M8 12h8M8 16h6" stroke="#0ea5e9" stroke-width="2"/></svg>
            {% elif model.object_name == 'Campaign' %}
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 6h12l4 4-4 4H4z" stroke="#0ea5e9" stroke-width="2"/></svg>
            {% elif model.object_name == 'Creative' %}
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 4v6l4 2-4 2v6l-4-4-4 4V4h12z" stroke="#0ea5e9" stroke-width="2"/></svg>
            {% elif model.object_name == 'Event' %}
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="9" stroke="#0ea5e9" stroke-width="2"/><path d="M12 7v5l3 2" stroke="#0ea5e9" stroke-width="2"/></svg>
            {% else %}
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="5" y="5" width="14" height="14" rx="2" stroke="#0ea5e9" stroke-width="2"/></svg>
            {% endif %}
          </div>
          <div class="label">{{ model.name }}</div>
          <span class="count">{% model_count2 app.app_label model.object_name %}</span>
        </a>
      {% endfor %}
    </div>
    <div class="tile-bar">
      {% for model in app.models %}
        {% if model.add_url %}
          <a class="tile add" href="{{ model.add_url }}">
            <div class="icon">
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 5v14M5 12h14" stroke="#ffffff" stroke-width="2"/></svg>
            </div>
            <div class="label">Add {{ model.name }}</div>
          </a>
        {% endif %}
      {% endfor %}
    </div>
  {% endfor %}
{% else %}
  <p>{% translate 'You don\'t have permission to view or edit anything.' %}</p>
{% endif %}

{% endblock %}

